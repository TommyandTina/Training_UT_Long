#######################################################################################################################
# Copyright [2019] Renesas Electronics Corporation and/or its licensors. All Rights Reserved.
#
# The contents of this file (the "contents") are proprietary and confidential to Renesas Electronics Corporation
# and/or its licensors ("Renesas") and subject to statutory and contractual protections.
#
# Unless otherwise expressly agreed in writing between Renesas and you: 1) you may not use, copy, modify, distribute,
# display, or perform the contents; 2) you may not use any name or mark of Renesas for advertising or publicity
# purposes or in connection with your use of the contents; 3) RENESAS MAKES NO WARRANTY OR REPRESENTATIONS ABOUT THE
# SUITABILITY OF THE CONTENTS FOR ANY PURPOSE; THE CONTENTS ARE PROVIDED "AS IS" WITHOUT ANY EXPRESS OR IMPLIED
# WARRANTY, INCLUDING THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND
# NON-INFRINGEMENT; AND 4) RENESAS SHALL NOT BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL, OR CONSEQUENTIAL DAMAGES,
# INCLUDING DAMAGES RESULTING FROM LOSS OF USE, DATA, OR PROJECTS, WHETHER IN AN ACTION OF CONTRACT OR TORT, ARISING
# OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THE CONTENTS. Third-party contents included in this file may
# be subject to different terms.
#######################################################################################################################

# Disable in-source build
#check_for_insource_build()

# Set library name
project(imp_simple_test VERSION 0.8.0)

# Set source file
set(source_name
    src/impDemo.c
    src/impDemo_sub.c
    src/r_impsample_axid.c
)
# Set include directory
set(private_include_dir
    ${CMAKE_CURRENT_SOURCE_DIR}/src/include
)

# Build library
add_executable(${PROJECT_NAME} "")

# Set source file will be built
target_sources(${PROJECT_NAME}
    PRIVATE ${source_name}
)

if("${RCAR_SOC}" STREQUAL "v3u")
    add_definitions(-DTEST_RCAR_V3U)
elseif("${RCAR_SOC}" STREQUAL "v3h2")
    add_definitions(-DTEST_RCAR_V3H2)
elseif("${RCAR_SOC}" STREQUAL "v3h1")
    add_definitions(-DTEST_RCAR_V3H1)
elseif("${RCAR_SOC}" STREQUAL "v3m2")
    add_definitions(-DTEST_RCAR_V3M2)
elseif("${RCAR_SOC}" STREQUAL "v4h")
    add_definitions(-DTEST_RCAR_V4H)
else()
endif()


# Set the path to the include folder
target_include_directories(${PROJECT_NAME}
    PRIVATE
        "$<BUILD_INTERFACE:${private_include_dir}>"
)

# Set definition
target_compile_options(${PROJECT_NAME}
    PRIVATE "${RCAR_ASIL_FLAGS}"
)

target_compile_definitions(${PROJECT_NAME}
    PRIVATE
        # IMP_SAMPLE_CACHE
)

# Add dependencies
target_link_libraries(${PROJECT_NAME} 
    PRIVATE 
        impfw
        imp
        osal
        atmlib
        osal_wrapper
#        osal_usr_cfg
)

if(RCAR_TARGET_OS STREQUAL "qnx")
   list(APPEND link_lib  
       osal_configuration
   ) 
endif()

#include_directories(${CMAKE_CURRENT_SOURCE_DIR}/../../../os/osal_wrapper_freertos/osal_usr_cfg)

# Set linker script
if (${RCAR_TARGET_OS} MATCHES "freertos")
    target_link_libraries(${PROJECT_NAME}
        PRIVATE
            genericapi
    )
    set(linker_script "${CMAKE_CURRENT_SOURCE_DIR}/eagle.scat")
    cmake_set_linker_script(${linker_script})
endif()

# install target
#rcar_install(PROJECT_NAME public_include_dir private_include_dir source_name doc)
